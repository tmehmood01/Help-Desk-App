{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'../TicketListPage.css';// Import CSS file for styling\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TicketListPage=()=>{const[tickets,setTickets]=useState([]);const[selectedTicket,setSelectedTicket]=useState(null);const[message,setMessage]=useState('');const[newStatus,setNewStatus]=useState('');useEffect(()=>{fetchTickets();},[]);const fetchTickets=async()=>{try{const res=await axios.get('/api/tickets');console.log(\"data\",res.data);setTickets(res.data);}catch(err){console.error('Error fetching tickets:',err);}};const handleRespondClick=ticket=>{console.log(\"ticket\",ticket);setSelectedTicket(ticket);setMessage('');setNewStatus('');};const handleSubmit=async e=>{e.preventDefault();try{console.log(\"selectedTicket\",selectedTicket);await axios.put(\"/api/tickets/\".concat(selectedTicket.id),{message,status:newStatus});fetchTickets();// Reset form fields and selected ticket after submission\nsetMessage('');setNewStatus('');setSelectedTicket(null);}catch(err){console.error('Error updating ticket:',err);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"List of Tickets\"}),/*#__PURE__*/_jsx(\"ul\",{children:tickets.map(ticket=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Name: \",ticket.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",ticket.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",ticket.description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",ticket.status]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRespondClick(ticket),children:\"Respond\"}),/*#__PURE__*/_jsx(\"hr\",{})]},ticket.id))}),selectedTicket&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Respond to Ticket\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Message:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:message,onChange:e=>setMessage(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status:\"}),/*#__PURE__*/_jsxs(\"select\",{value:newStatus,onChange:e=>setNewStatus(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"new\",children:\"New\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"resolved\",children:\"Resolved\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]})]})]});};export default TicketListPage;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","TicketListPage","tickets","setTickets","selectedTicket","setSelectedTicket","message","setMessage","newStatus","setNewStatus","fetchTickets","res","get","console","log","data","err","error","handleRespondClick","ticket","handleSubmit","e","preventDefault","put","concat","id","status","children","map","name","email","description","onClick","onSubmit","value","onChange","target","required","type"],"sources":["/Users/tahirmehmood/Projects/Zealthy/Help-Desk-App/support-ticket-frontend/src/components/TicketListPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../TicketListPage.css'; // Import CSS file for styling\n\nconst TicketListPage = () => {\n  const [tickets, setTickets] = useState([]);\n  const [selectedTicket, setSelectedTicket] = useState(null);\n  const [message, setMessage] = useState('');\n  const [newStatus, setNewStatus] = useState('');\n\n  useEffect(() => {\n    fetchTickets();\n  }, []);\n\n  const fetchTickets = async () => {\n    try {\n      const res = await axios.get('/api/tickets');\n      console.log(\"data\", res.data);\n      setTickets(res.data);\n    } catch (err) {\n      console.error('Error fetching tickets:', err);\n    }\n  };\n\n  const handleRespondClick = (ticket) => {\n    console.log(\"ticket\", ticket);\n    setSelectedTicket(ticket);\n    setMessage('');\n    setNewStatus('');\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n        console.log(\"selectedTicket\", selectedTicket);\n      await axios.put(`/api/tickets/${selectedTicket.id}`, {\n        message,\n        status: newStatus,\n      });\n      fetchTickets();\n      // Reset form fields and selected ticket after submission\n      setMessage('');\n      setNewStatus('');\n      setSelectedTicket(null);\n    } catch (err) {\n      console.error('Error updating ticket:', err);\n    }\n  };\n\n  return (\n    <div>\n      <h2>List of Tickets</h2>\n      <ul>\n        {tickets.map(ticket => (\n          <li key={ticket.id}>\n            <p>Name: {ticket.name}</p>\n            <p>Email: {ticket.email}</p>\n            <p>Description: {ticket.description}</p>\n            <p>Status: {ticket.status}</p>\n            <button onClick={() => handleRespondClick(ticket)}>Respond</button>\n            <hr />\n          </li>\n        ))}\n      </ul>\n      {selectedTicket && (\n        <div>\n          <h2>Respond to Ticket</h2>\n          <form onSubmit={handleSubmit}>\n            <div>\n              <label>Message:</label>\n              <textarea value={message} onChange={(e) => setMessage(e.target.value)} required />\n            </div>\n            <div>\n              <label>Status:</label>\n              <select value={newStatus} onChange={(e) => setNewStatus(e.target.value)}>\n                <option value=\"new\">New</option>\n                <option value=\"in progress\">In Progress</option>\n                <option value=\"resolved\">Resolved</option>\n              </select>\n            </div>\n            <button type=\"submit\">Submit</button>\n          </form>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TicketListPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}